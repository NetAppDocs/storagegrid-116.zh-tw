---
permalink: primer/using-information-lifecycle-management.html 
sidebar: sidebar 
keywords: what is information lifecycle management, how to use ilm 
summary: 您可以使用資訊生命週期管理（ILM）來控制StorageGRID 您的整個系統中所有物件的放置、持續時間和資料保護。ILM規則可決定StorageGRID 物件的儲存方式。您可以設定一或多個ILM規則、然後將其新增至ILM原則。 
---
= 使用資訊生命週期管理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以使用資訊生命週期管理（ILM）來控制StorageGRID 整個系統中所有物件的放置、持續時間和資料保護。ILM規則可決定StorageGRID 物件的儲存方式。您可以設定一或多個ILM規則、然後將其新增至ILM原則。

ILM規則定義：

* 應該儲存哪些物件。規則可以套用至所有物件、也可以指定篩選條件、以識別規則適用的物件。例如、規則只能套用至與特定租戶帳戶、特定S3儲存區或Swift容器或特定中繼資料值相關聯的物件。
* 儲存類型與位置。物件可以儲存在儲存節點、雲端儲存資源池或歸檔節點上。
* 所製作的物件複本類型。複本可以複寫或銷毀編碼。
* 複寫複本的複本數量。
* 對於銷毀編碼複本、使用的是銷毀編碼方案。
* 隨著時間變更至物件的儲存位置和複本類型。
* 物件資料如何在物件擷取到網格時受到保護（同步放置或雙重提交）。


請注意、物件中繼資料並非由ILM規則管理。相反地、物件中繼資料會儲存在Cassandra資料庫的中繼資料儲存區中。每個站台會自動維護三個物件中繼資料複本、以保護資料免於遺失。複本會平均分散到所有儲存節點。



== ILM規則範例

本範例ILM規則適用於屬於租戶A的物件它會為這些物件建立兩個複寫複本、並將每個複本儲存在不同的站台。這兩個複本都保留「Forever」、這表示StorageGRID 不會自動刪除。相反地StorageGRID 、在用戶端刪除要求刪除這些物件之前、或是在庫位生命週期到期之前、將會保留這些物件。

此規則使用平衡選項來擷取行為：只要租戶A將物件儲存StorageGRID 至時、就會立即套用雙站台放置指示、除非無法立即製作這兩份必要的複本。例如、如果租戶A儲存物件時無法連線站台2、StorageGRID 則會在站台1的儲存節點上製作兩份臨時複本。一旦網站2推出、StorageGRID 就會在該網站上製作所需的複本。

image::../media/ilm_example_rule_2_copies_tenant_a.png[ILM規則2範例複製租戶A]



== ILM原則如何評估物件

適用於您的整個系統的有效ILM原則StorageGRID 可控制所有物件的放置、持續時間和資料保護。

當用戶端將物件儲存StorageGRID 至物件以供參考時、會根據作用中原則中的順序ILM規則集來評估物件、如下所示：

. 如果原則中第一個規則的篩選器符合物件、則會根據該規則的擷取行為擷取物件、並根據該規則的放置指示加以儲存。
. 如果第一條規則的篩選條件與物件不符、則會根據原則中的每個後續規則評估物件、直到進行比對為止。
. 如果沒有符合物件的規則、則會套用原則中預設規則的擷取行為和放置指示。預設規則是原則中的最後一個規則、無法使用任何篩選器。它必須套用至所有租戶、所有貯體及所有物件版本。




== ILM原則範例

本範例ILM原則使用三個ILM規則。

image::../media/policy_for_two_tenants.png[兩個租戶的原則範例]

在此範例中、規則1會比對屬於租戶A的所有物件這些物件會在三個站台儲存為三個複寫複本。屬於其他租戶的物件不符合規則1、因此會根據規則2進行評估。

規則2會比對來自其他租戶的所有物件、但只有當物件大於1 MB時才會比對。這些較大的物件使用6+3銷毀編碼儲存在三個站台。規則2不符合1 MB或更小的物件、因此會根據規則3評估這些物件。

規則3是原則中的最後一個和預設規則、不使用篩選器。規則3會針對規則1或規則2不相符的所有物件（不屬於租戶A且小於1 MB的物件）、製作兩份複寫複本。

image::../media/ilm_policy_and_rules.png[ILM原則與規則]

*相關資訊*

* xref:../ilm/index.adoc[使用ILM管理物件]

