= 關於修復資料指令碼
:allow-uri-read: 


.您需要的產品
* 您必須確認已恢復的儲存節點的連線狀態為*已連線* image:../media/icon_alert_green_checkmark.png["圖示警示綠色勾選標記"] 在Grid Manager的* nodes *>* Overview *（*節點*>*總覽*）索引標籤上。


.關於這項工作
物件資料可從其他儲存節點、歸檔節點或雲端儲存資源池還原、前提是已設定網格的ILM規則、使物件複本可供使用。

請注意下列事項：

* 如果ILM規則設定為只儲存一個複寫複本、且該複本存在於故障的儲存磁碟區上、您將無法恢復物件。
* 如果物件的唯一剩餘複本位於Cloud Storage Pool中、StorageGRID 則必須向Cloud Storage Pool端點發出多個要求、才能還原物件資料。在執行此程序之前、請聯絡技術支援部門、以協助評估恢復時間範圍及相關成本。
* 如果物件的唯一剩餘複本位於歸檔節點、則會從歸檔節點擷取物件資料。從歸檔節點將物件資料還原至儲存節點所需的時間、比從其他儲存節點還原複本所需的時間更長、因為外部歸檔儲存系統的擷取作業會產生延遲。




== 關於 `repair-data` 指令碼

若要還原物件資料、請執行「重新配對資料」指令碼。此指令碼會開始還原物件資料的程序、並與ILM掃描搭配使用、以確保符合ILM規則。

請選取下方*複寫資料*或*刪除編碼（EC）資料*、以瞭解「重新配對資料」指令碼的不同選項、視您要還原複寫資料或刪除編碼資料而定。如果您需要還原這兩種類型的資料、則必須同時執行這兩組命令。


NOTE: 如需有關「重新配對資料」指令碼的詳細資訊、請從主管理節點的命令列輸入「重新配對資料-說明」。

[role="tabbed-block"]
====
.複寫資料
--
根據您是需要修復整個節點、還是只需要修復節點上的特定磁碟區、有兩個命令可用於還原複寫資料：

「重新配對資料開始複寫節點修復」

「重新配對資料開始複寫磁碟區修復」

您可以使用下列命令來追蹤複寫資料的修復：

「重配對資料顯示複製的修復狀態」


IMPORTANT: 「如何複製修復狀態」選項可在StorageGRID 畫面上進行技術預覽。此功能正在開發中、傳回的值可能不正確或延遲。若要判斷修復是否完成、請使用*「等待–全部*」、*「嘗試的維修」（XRPA）*、以及*「掃描期間」-「預估（XSCM）」*、如所述 xref:..//maintain/restoring-object-data-to-storage-volume-where-system-drive-is-intact.adoc[監控維修]。

--
.銷毀編碼（EC）資料
--
根據您是需要修復整個節點、還是只需要修復節點上的特定磁碟區、有兩個命令可用於還原銷毀編碼資料：

「重新配對資料啟動- EC-node-repair」

「重新配對資料啟動- EC-Volume修復」

在某些儲存節點離線時、可以開始修復以銷毀編碼的資料。所有節點都可用後、修復作業即告完成。

您可以使用下列命令來追蹤銷毀編碼資料的修復：

「資料配對顯示- EC-repair狀態」


NOTE: EC修復工作會暫時保留大量的儲存空間。可能會觸發儲存警示、但會在修復完成時解決。如果保留的儲存空間不足、EC修復工作將會失敗。無論工作失敗或成功、儲存保留都會在EC修復工作完成時釋出。

--
====