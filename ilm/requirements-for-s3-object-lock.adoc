---
permalink: ilm/requirements-for-s3-object-lock.html 
sidebar: sidebar 
keywords: requirements, s3 object lock 
summary: 您必須檢閱啟用全域S3物件鎖定設定的需求、建立相容ILM規則和ILM原則的需求、StorageGRID 以及使用S3物件鎖定之貯體和物件的限制等資訊。 
---
= S3物件鎖定需求
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您必須檢閱啟用全域S3物件鎖定設定的需求、建立相容ILM規則和ILM原則的需求、StorageGRID 以及使用S3物件鎖定之貯體和物件的限制等資訊。



== 使用全域S3物件鎖定設定的需求

* 您必須先使用Grid Manager或Grid Management API啟用全域S3物件鎖定設定、任何S3租戶才能建立啟用S3物件鎖定的儲存區。
* 啟用全域S3物件鎖定設定可讓所有S3租戶帳戶建立啟用S3物件鎖定的儲存區。
* 啟用全域S3物件鎖定設定之後、就無法停用此設定。
* 除非作用中ILM原則中的預設規則為_Compliance（也就是、預設規則必須符合啟用S3物件鎖定的儲存區需求）、否則您無法啟用全域S3物件鎖定。
* 啟用全域S3物件鎖定設定時、除非原則中的預設規則相容、否則您無法建立新的建議ILM原則或啟動現有的建議ILM原則。啟用全域S3物件鎖定設定之後、「ILM規則」和「ILM原則」頁面會指出哪些ILM規則符合規定。
+
在下列範例中、「ILM規則」頁面列出三個規則、這些規則均符合啟用S3物件鎖定的儲存區。

+
image::../media/compliance_fields_on_ilm_rules_page.png[ILM Rules頁面上的Compliance欄位]





== 符合ILM規則的要求

如果您要啟用全域S3物件鎖定設定、必須確保使用中ILM原則中的預設規則符合規定。相容的規則可同時滿足啟用S3物件鎖定的兩個儲存區需求、以及啟用舊版法規遵循的任何現有儲存區：

* 它必須建立至少兩個複寫的物件複本、或一個銷毀編碼複本。
* 這些複本必須存在於儲存節點上、且必須在放置說明中的每一行的整個期間內存在。
* 物件複本無法儲存在雲端儲存資源池中。
* 物件複本無法儲存在歸檔節點上。
* 至少一行的放置說明必須從第0天開始、使用*擷取時間*作為參考時間。
* 至少一行的放置說明必須是「永遠」。


例如、此規則可滿足啟用S3物件鎖定的儲存區需求。它儲存兩個複寫的物件複本、從擷取時間（第0天）到「永遠」。 物件將儲存在兩個資料中心的儲存節點上。

image::../media/compliant_rule_two_copies_forever.png[符合範例的規則永久兩個複本]



== 主動式與建議的ILM原則需求

當全域S3物件鎖定設定已啟用時、作用中和建議的ILM原則可以同時包含相容和不相容的規則。

* 作用中或任何建議的ILM原則中的預設規則必須符合規定。
* 不符合規定的規則僅適用於未啟用S3物件鎖定或未啟用舊版符合性功能的儲存區中的物件。
* 符合法規的規則可套用至任何儲存區中的物件；不需要為儲存區啟用S3物件鎖定或舊版符合法規。


符合法規的ILM原則可能包括下列三項規則：

. 一種相容規則、可在啟用S3物件鎖定的情況下、在特定儲存區中建立物件的銷毀編碼複本。EC複本會從第0天儲存在儲存節點上、直到永遠儲存在儲存節點上。
. 不符合規定的規則、會在儲存節點上建立一年的兩個複寫物件複本、然後將一個物件複本移至「歸檔節點」、並永久儲存該複本。此規則僅適用於未啟用S3物件鎖定或舊版法規遵循的儲存區、因為它只會永久儲存一個物件複本、而且會使用歸檔節點。
. 這是一種預設且符合法規的規則、可在儲存節點上建立兩個複寫的物件複本、從第0天到永遠。此規則適用於前兩個規則未篩選的任何儲存區中的任何物件。




== 啟用S3物件鎖定的儲存區需求

* 如果StorageGRID 已針對整個S3物件鎖定設定啟用for the S廳 系統、您可以使用租戶管理程式、租戶管理API或S3 REST API來建立啟用S3物件鎖定的儲存區。
+
此租戶管理程式範例顯示已啟用S3物件鎖定的儲存區。

+
image::../media/compliant_bucket.png[符合範例的工作時段]

* 如果您打算使用S3物件鎖定、則必須在建立儲存區時啟用S3物件鎖定。您無法為現有的儲存區啟用S3物件鎖定。
* S3物件鎖定需要庫位版本管理。當「S3物件鎖定」已啟用時、StorageGRID 即可自動啟用該儲存區的版本管理功能。
* 在建立啟用S3物件鎖定的儲存區之後、您無法停用該儲存區的S3物件鎖定或暫停版本管理。
* 您也可以設定儲存區的預設保留。上傳物件版本時、預設保留會套用至物件版本。您可以指定保留模式來覆寫儲存區預設值、並在上傳物件版本的要求中保留截止日期。
* S3物件生命週期儲存區支援儲存區生命週期組態。
* 啟用S3物件鎖定的儲存區不支援CloudMirror複寫。




== 啟用S3物件鎖定之儲存區中的物件需求

* 為了保護物件版本、S3用戶端應用程式必須設定儲存區預設保留、或在每個上傳要求中指定保留設定。
* 您可以增加物件版本的保留截止日期、但絕不能減少此值。
* 如果您收到尚待處理的法律行動或法規調查通知、您可以在物件版本上保留合法資訊、以保留相關資訊。當物件版本處於合法持有狀態時、即使StorageGRID 物件已達到保留日期、也無法從該物件刪除。一旦取消合法持有、如果已達到保留截止日期、就可以刪除物件版本。
* S3物件鎖定需要使用版本控制的儲存區。保留設定適用於個別物件版本。物件版本可以同時具有「保留直到日期」和「合法保留」設定、但不能有另一個設定、或兩者都沒有。指定物件的保留截止日期或合法保留設定、只會保護要求中指定的版本。您可以建立物件的新版本、而舊版物件仍會保持鎖定狀態。




== 啟用S3物件鎖定的儲存區物件生命週期

儲存在已啟用S3物件鎖定的儲存區中的每個物件都會經過三個階段：

. *物件擷取*
+
** 在啟用S3物件鎖定的情況下、將物件版本新增至儲存區時、S3用戶端應用程式可以使用預設的儲存區保留設定、或是選擇性地指定物件的保留設定（保留至日期、合法保留或兩者皆保留）。接著、將產生該物件的中繼資料、其中包括唯一的物件識別碼（UUID）和擷取日期與時間。StorageGRID
** 擷取具有保留設定的物件版本之後、就無法修改其資料和S3使用者定義的中繼資料。
** 不受物件資料限制、可獨立儲存物件中繼資料。StorageGRID它會在每個站台維護三份所有物件中繼資料複本。


. *物件保留*
+
** 物件的多個複本是StorageGRID 由NetApp儲存的。複本的確切數量和類型、以及儲存位置、取決於使用中ILM原則中的相容規則。


. *物件刪除*
+
** 物件到達保留截止日期時、即可刪除。
** 無法刪除合法持有的物件。




.相關資訊
* xref:../tenant/index.adoc[使用租戶帳戶]
* xref:../s3/index.adoc[使用S3]
* xref:managing-objects-with-s3-object-lock.adoc#comparing-s3-object-lock-to-legacy-compliance[比較S3物件鎖定與舊版法規遵循]
* xref:example-7-compliant-ilm-policy-for-s3-object-lock.adoc[範例7：S3物件鎖定的符合ILM原則]
* xref:../audit/index.adoc[檢閱稽核記錄]
* xref:../s3/operations-on-buckets.adoc#using-s3-object-lock-default-bucket-retention[使用S3物件鎖定預設儲存區保留]。

