---
permalink: ilm/what-ilm-rule-is.html 
sidebar: sidebar 
keywords: what is information lifecycle rule, ilm rule 
summary: 若要管理物件、請建立一組資訊生命週期管理（ILM）規則、並將其組織成ILM原則。系統中擷取的每個物件都會根據作用中原則進行評估。當原則中的規則符合物件的中繼資料時、規則中的指示會決定StorageGRID 哪些動作需要複製及儲存該物件。 
---
= 什麼是ILM規則
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
若要管理物件、請建立一組資訊生命週期管理（ILM）規則、並將其組織成ILM原則。系統中擷取的每個物件都會根據作用中原則進行評估。當原則中的規則符合物件的中繼資料時、規則中的指示會決定StorageGRID 哪些動作需要複製及儲存該物件。

ILM規則定義：

* 應該儲存哪些物件。規則可以套用至所有物件、也可以指定篩選條件、以識別規則適用的物件。例如、規則只能套用至與特定租戶帳戶、特定S3儲存區或Swift容器或特定中繼資料值相關聯的物件。
* 儲存類型與位置。物件可以儲存在儲存節點、雲端儲存資源池或歸檔節點上。
* 所製作的物件複本類型。複本可以複寫或銷毀編碼。
* 複寫複本的複本數量。
* 對於銷毀編碼複本、使用的是銷毀編碼方案。
* 隨著時間變更至物件的儲存位置和複本類型。
* 物件資料如何在物件擷取到網格時受到保護（同步放置或雙重提交）。


請注意、物件中繼資料並非由ILM規則管理。相反地、物件中繼資料會儲存在Cassandra資料庫的中繼資料儲存區中。每個站台會自動維護三個物件中繼資料複本、以保護資料免於遺失。複本會平均分散到所有儲存節點。



== ILM規則的元素

ILM規則有三個元素：

* *篩選條件*：規則的基本和進階篩選條件會定義規則所套用的物件。如果物件符合所有篩選條件、StorageGRID 則會套用規則、並建立規則放置說明中指定的物件複本。
* *放置指示*：規則的放置指示會定義物件複本的編號、類型和位置。每個規則都可以包含一系列放置指示、以便隨著時間變更物件複本的編號、類型和位置。當一個放置時間到期時、下一個放置位置的指示會自動套用到下一個ILM評估。
* *內嵌行為*：規則的擷取行為定義S3或Swift用戶端將物件儲存至網格時會發生什麼情況。擷取行為可控制物件複本是否立即根據規則中的指示放置、或是是否製作了過渡複本、並於稍後套用放置指示。




== 什麼是ILM規則篩選

建立ILM規則時、您可以指定篩選條件、以識別規則所套用的物件。

在最簡單的情況下、規則可能不會使用任何篩選器。任何不使用篩選器的規則都會套用至所有物件、因此它必須是ILM原則中的最後一個（預設）規則。預設規則會針對不符合其他規則篩選條件的物件、提供儲存指示。

基本篩選器可讓您將不同的規則套用至大型、不同的物件群組。「建立ILM規則」精靈的「定義基礎」頁面上的基本篩選條件可讓您將規則套用至特定租戶帳戶、特定S3儲存區或Swift容器、或兩者。

image::../media/ilm_create_ilm_rule_wizard_1.png[ILM精靈：步驟1（共3步）]

這些基本篩選器可讓您簡單地將不同的規則套用至大量物件。例如、貴公司的財務記錄可能需要儲存以符合法規要求、而行銷部門的資料可能需要儲存以利日常營運。在為每個部門建立個別的租戶帳戶之後、或是將不同部門的資料分隔成不同的S3儲存區之後、您可以輕鬆建立適用於所有財務記錄的規則、以及適用於所有行銷資料的第二條規則。

「建立ILM規則」精靈的「*進階篩選*」頁面可提供精細的控制。您可以建立篩選條件、根據下列物件內容來選取物件：

* 擷取時間
* 上次存取時間
* 物件名稱的全部或部分（金鑰）
* S3 Bucket區域（位置限制）
* 物件大小
* 使用者中繼資料
* S3物件標記


您可以根據非常特定的條件篩選物件。例如、醫院成像部門儲存的物件、可能會在使用時間少於30天且之後不常使用時頻繁使用、而含有病患就診資訊的物件、則可能需要複製到醫療網路總部的帳單部門。您可以建立篩選器、根據物件名稱、大小、S3物件標記或任何其他相關準則來識別每種物件類型、然後建立個別的規則來適當地儲存每組物件。

您也可以視需要在單一規則中結合基本和進階篩選條件。例如、行銷部門可能想要以不同於廠商記錄的方式來儲存大型映像檔、而人力資源部門可能需要將人員記錄集中儲存在特定地理區域和原則資訊中。在此案例中、您可以建立規則、依租戶帳戶篩選、以將記錄與每個部門區隔、同時在每個規則中使用進階篩選器來識別規則適用的特定物件類型。



== 什麼是ILM規則放置指示

放置指示可決定物件資料的儲存位置、時間及方式。ILM規則可以包含一或多個放置指示。每項放置指示均適用於單一時間段。

建立放置指示時：

* 您可以先指定參考時間、以決定放置指示的開始時間。參考時間可能是指：擷取物件、存取物件、版本控制物件變成非目前物件、或是使用者定義的時間。
* 接下來、您可以指定套用位置的時間、相對於參考時間。例如、相對於擷取物件的時間、放置位置可能從第0天開始、持續365天。
* 最後、您可以指定複本類型（複寫或銷毀編碼）、以及複本的儲存位置。例如、您可能想要在兩個不同站台儲存兩個複寫複本。


每個規則可定義單一時段的多個刊登位置、以及不同時段的不同刊登位置。

* 若要在單一時間段內將物件放置在多個位置、請選取加號圖示 image:../media/icon_plus_sign_black_on_white.gif["加號圖示「白黑」"] 可在該時段內新增多行。
* 若要將物件放置在不同時間週期的不同位置、請選取「*新增*」按鈕以新增下一個時間週期。然後、在期間內指定一或多行。


範例顯示「建立ILM規則」精靈的「定義放置位置」頁面。

image::../media/ilm_rule_multiple_placements_in_single_time_period.png[Grid Manager的ILM放置畫面]

[cols="1a,3a"]
|===


 a| 
image:../media/icon_number_1.png["圖示編號1"]
 a| 
第一年的第一次放置指示有兩行：

. 第一行會在兩個資料中心站台建立兩個複寫的物件複本。
. 第二行使用三個資料中心站台建立6+3個銷毀編碼複本。




 a| 
image:../media/icon_number_2.png["圖示編號2."]
 a| 
第二份放置指示會在一年後建立兩份歸檔複本、並永久保留這些複本。

|===
當您定義規則的放置指示集時、必須確保至少有一個放置指示從第0天開始、且您定義的時間週期之間沒有任何落差、 最後的放置指示會持續執行、直到您不再需要任何物件複本為止。

當規則中的每個時間段到期時、將會套用下一個時間段的內容放置指示。系統會建立新的物件複本、並刪除任何不需要的複本。



== ILM規則範例

本範例ILM規則適用於屬於租戶A的物件它會為這些物件建立兩個複寫複本、並將每個複本儲存在不同的站台。這兩個複本都保留「Forever」、這表示StorageGRID 不會自動刪除。相反地StorageGRID 、在用戶端刪除要求刪除這些物件之前、或是在庫位生命週期到期之前、將會保留這些物件。

此規則使用平衡選項來擷取行為：只要租戶A將物件儲存StorageGRID 至時、就會立即套用雙站台放置指示、除非無法立即製作這兩份必要的複本。例如、如果租戶A儲存物件時無法連線站台2、StorageGRID 則會在站台1的儲存節點上製作兩份臨時複本。一旦網站2推出、StorageGRID 就會在該網站上製作所需的複本。

image::../media/ilm_example_rule_2_copies_tenant_a.png[ILM規則2範例複製租戶A]

.相關資訊
* xref:data-protection-options-for-ingest.adoc[用於擷取的資料保護選項]
* xref:what-storage-pool-is.adoc[什麼是儲存資源池]
* xref:what-cloud-storage-pool-is.adoc[什麼是雲端儲存資源池]

