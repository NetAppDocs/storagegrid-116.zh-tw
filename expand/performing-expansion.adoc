---
permalink: expand/performing-expansion.html 
sidebar: sidebar 
keywords: expand, expansion procedure 
summary: 當您執行擴充時、新的網格節點會新增至您現有StorageGRID 的功能介紹部署。 
---
= 執行擴充
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
當您執行擴充時、新的網格節點會新增至您現有StorageGRID 的功能介紹部署。

.您需要的產品
* 您將使用登入Grid Manager xref:../admin/web-browser-requirements.adoc[支援的網頁瀏覽器]。
* 您具有「維護」或「根」存取權限。
* 您有資源配置通關密碼。
* 您已部署此擴充中要新增的所有網格節點。
* 如果您要新增儲存節點、表示您已確認在還原過程中執行的所有資料修復作業均已完成。請參閱 xref:../maintain/checking-data-repair-jobs.adoc[檢查資料修復工作]。
* 如果您要新增站台、則必須在開始擴充程序之前檢閱並更新ILM規則、以確保物件複本不會儲存到新站台、直到擴充完成為止。例如、如果某個規則使用預設儲存資源池（所有儲存節點）、則您必須建立僅包含現有儲存節點的新儲存資源池、並更新ILM規則以使用新的儲存資源池。否則、只要該站台的第一個節點變成作用中、就會將物件複製到新站台。請參閱的說明 xref:../ilm/index.adoc[使用ILM管理物件]。


.關於這項工作
執行擴充包括下列階段：

. 您可以指定要新增網格節點或新站台、並核准要新增的網格節點、來設定擴充。
. 您可以開始擴充。
. 在擴充程序執行期間、您會下載新的恢復套件檔案。
. 您可以監控自動執行的網格組態階段狀態。階段集取決於要新增的網格節點類型、以及是否要新增站台。
+

IMPORTANT: 某些階段可能需要大量時間才能在大型網格上執行。例如、如果Cassandra資料庫是空的、將Cassandra串流至新的儲存節點可能只需要幾分鐘的時間。不過、如果Cassandra資料庫包含大量的物件中繼資料、這個階段可能需要數小時或更長的時間。請勿在「擴充Cassandra叢集」或「啟動Cassandra和串流資料」階段重新開機任何儲存節點。



.步驟
. 選擇*維護*>*工作*>*擴充*。
+
此時會出現「Grid Expansion（網格擴充）」「Pending Node」（擱置節點）區段列出所有準備新增的節點。

+
image::../media/grid_expansion_page.png[顯示Grid Expansion頁面的快照]

. 選擇*組態擴充*。
+
此時會出現站台選擇對話方塊。

+
image::../media/configure_expansion_dialog.gif[站台選擇對話方塊]

. 選取您要開始的擴充類型：
+
** 如果您要新增站台、請選取*新增*、然後輸入新站台的名稱。
** 如果要將網格節點新增至現有站台、請選取* Exexisting *。


. 選擇*保存*。
. 檢閱「*擱置節點*」清單、並確認其顯示您部署的所有網格節點。
+
視需要、您可以將游標暫留在節點的*網格網路MAC位址*上、以查看該節點的詳細資料。

+
image::../media/grid_node_details.gif[Grid Node詳細資料的快照]

+

NOTE: 如果缺少網格節點、請確認已成功部署。

. 從待處理節點清單中、核准此擴充的網格節點。
+
.. 選取您要核准之第一個擱置的網格節點旁的選項按鈕。
.. 選取*核准*。
+
此時將出現網格節點組態表單。

+
image::../media/grid_node_configuration.gif[網格節點組態表單]

.. 視需要修改一般設定：
+
*** *站台*：與網格節點相關聯的站台名稱。如果您要新增多個節點、請務必為每個節點選取正確的站台。如果您要新增站台、所有節點都會新增至新站台。
*** *名稱*：將指派給節點的主機名稱、以及網格管理器中顯示的名稱。
*** * NTP角色*：網格節點的網路時間傳輸協定（NTP）角色。選項包括*自動*、*主要*和*用戶端*。選取*自動*會將主要角色指派給管理節點、具有ADC服務的儲存節點、閘道節點、以及任何具有非靜態IP位址的網格節點。所有其他網格節點都會被指派「用戶端」角色。
+

NOTE: 將主要NTP角色指派給每個站台至少兩個節點。這可讓系統對外部時間來源進行備援存取。

*** * ADC服務*（僅限儲存節點）：此儲存節點是否會執行管理網域控制器（ADC）服務。ADC服務會追蹤網格服務的位置和可用度。每個站台至少必須有三個儲存節點包含ADC服務。部署之後、您無法將該ADC服務新增至節點。
+
**** 如果您要新增此節點來取代儲存節點、如果您要更換的節點包含了ADC服務、請選取* Yes*。由於如果剩餘的ADC服務太少、您就無法取消委任儲存節點、因此可確保在移除舊服務之前、新的ADC服務可用。
**** 否則、請選取*自動*、讓系統判斷此節點是否需要使用ADC服務。瞭解有關ADC仲裁的資訊 xref:../maintain/understanding-adc-service-quorum.adoc[請按這裡]。




.. 視需要修改網格網路、管理網路和用戶端網路的設定。
+
*** * IPV4位址（CIDR）*：網路介面的CIDR網路位址。例如：172.16.10.100/24
*** *閘道*：網格節點的預設閘道。例如：172.16.10.1
*** *子網路（CIDR）*：管理網路的一或多個子網路。


.. 選擇*保存*。
+
核准的網格節點會移至「核准的節點」清單。

+
image::../media/grid_expansion_approved_nodes.png[顯示已核准節點的快照]

+
*** 若要修改已核准網格節點的內容、請選取其選項按鈕、然後選取*編輯*。
*** 若要將已核准的網格節點移回「Pending Node」（擱置節點）清單、請選取其選項按鈕、然後選取* Reset*（重設*）。
*** 若要永久移除已核准的網格節點、請關閉節點電源。然後選取其選項按鈕、並選取*移除*。


.. 針對您要核准的每個擱置的網格節點、重複這些步驟。
+

NOTE: 如有可能、您應核准所有待處理的網格備註、並執行單一擴充。如果您執行多項小型擴充、則需要更多時間。



. 核准所有網格節點後、請輸入*資源配置密碼*、然後選取*展開*。
+
幾分鐘後、此頁面會更新以顯示擴充程序的狀態。當影響個別網格節點的工作正在進行時、「網格節點狀態」區段會列出每個網格節點的目前狀態。

+

NOTE: 在此程序中、StorageGRID 針對應用裝置、《不適用產品》安裝程式會顯示安裝從第3階段移至第4階段、完成安裝。當階段4完成時、控制器會重新開機。

+
image::../media/grid_expansion_progress.png[此影像由周邊文字說明。]

+

NOTE: 站台擴充包括為新站台設定Cassandra的額外工作。

. 一旦出現*下載恢復套件*連結、請立即下載恢復套件檔案。
+
您必須在StorageGRID 變更整個系統的網格拓撲之後、盡快下載更新的恢復套件檔案複本。恢復套件檔案可讓您在發生故障時還原系統。

+
.. 選取下載連結。
.. 輸入資源配置通關密碼、然後選取*開始下載*。
.. 下載完成後、開啟「.Zip」檔案、確認其中包含「GPT備份」目錄和「_soe.zip」檔案。然後、擷取「_say.zip」檔案、移至「/gid*_rev*」目錄、確認您可以開啟「passwors.txt」檔案。
.. 將下載的「恢復套件」檔案（.zip）複製到兩個安全、安全且獨立的位置。
+

IMPORTANT: 必須保護恢復套件檔案、因為其中包含可用於從StorageGRID 該系統取得資料的加密金鑰和密碼。



. 請依照指示將儲存節點新增至現有站台或新增站台。


[role="tabbed-block"]
====
.新增儲存節點至現有站台
--
如果您要將一或多個儲存節點新增至現有站台、請檢閱狀態訊息中顯示的百分比、以監控「正在啟動Cassandra和串流資料」階段的進度。

image::../media/grid_expansion_starting_cassandra.png[Grid Expansion >正在啟動Cassandra和串流資料]

此百分比會根據可用的Cassandra資料總量和已寫入新節點的數量、來估計Cassandra串流作業的完成程度。


IMPORTANT: 請勿在「擴充Cassandra叢集」或「啟動Cassandra和串流資料」階段重新開機任何儲存節點。每個新的儲存節點可能需要許多小時才能完成這些階段、尤其是現有的儲存節點包含大量的物件中繼資料時。

--
.新增網站
--
如果您要新增網站、請使用「nodetool」狀態來監控Cassandra串流的進度、並查看在「擴充Cassandra叢集」階段期間、有多少中繼資料已複製到新網站。新站台上的資料負載總計應在目前站台總數的20%之內。


IMPORTANT: 請勿在「擴充Cassandra叢集」或「啟動Cassandra和串流資料」階段重新開機任何儲存節點。每個新的儲存節點可能需要許多小時才能完成這些階段、尤其是現有的儲存節點包含大量的物件中繼資料時。

--
====
. 繼續監控擴充作業、直到所有工作都完成、且「*組態擴充*」按鈕再次出現。


.完成後
視您新增的網格節點類型而定、您必須執行其他整合與組態步驟。請參閱 xref:configuring-expanded-storagegrid-system.adoc[擴充後的組態步驟]。
